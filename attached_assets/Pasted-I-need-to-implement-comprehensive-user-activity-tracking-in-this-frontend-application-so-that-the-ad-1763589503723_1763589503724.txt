I need to implement comprehensive user activity tracking in this frontend application so that the admin security dashboard can monitor all user activities. The admin dashboard is not receiving data because the frontend is not logging user actions to Supabase.

Please implement the following activity tracking system:

### 1. Create Activity Logger Utility (lib/activityLogger.js)

Create a utility file that logs user activities to multiple Supabase tables:

```javascript
import { supabase } from './supabaseClient';

// Get user's IP address
const getClientIP = async () => {
  try {
    const response = await fetch('https://api.ipify.org?format=json');
    const data = await response.json();
    return data.ip;
  } catch (error) {
    console.error('Failed to get IP:', error);
    return 'Unknown';
  }
};

// Parse user agent to get device info
const parseUserAgent = (userAgent) => {
  const ua = userAgent.toLowerCase();
  
  let deviceType = 'Desktop';
  if (ua.includes('mobile')) deviceType = 'Mobile';
  else if (ua.includes('tablet')) deviceType = 'Tablet';
  
  let browser = 'Unknown';
  if (ua.includes('chrome')) browser = 'Chrome';
  else if (ua.includes('firefox')) browser = 'Firefox';
  else if (ua.includes('safari')) browser = 'Safari';
  else if (ua.includes('edge')) browser = 'Edge';
  
  let os = 'Unknown';
  if (ua.includes('windows')) os = 'Windows';
  else if (ua.includes('mac')) os = 'macOS';
  else if (ua.includes('linux')) os = 'Linux';
  else if (ua.includes('android')) os = 'Android';
  else if (ua.includes('ios')) os = 'iOS';
  
  return { deviceType, browser, os };
};

// Log to system_logs table
export const logSystemActivity = async ({
  level = 'info',
  type,
  message,
  details = {}
}) => {
  try {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return;

    const ip_address = await getClientIP();
    const user_agent = navigator.userAgent;

    await supabase.from('system_logs').insert({
      user_id: user.id,
      level,
      type,
      message,
      details: {
        ...details,
        ip_address,
        user_agent,
        timestamp: new Date().toISOString()
      }
    });
  } catch (error) {
    console.error('Failed to log system activity:', error);
  }
};

// Log to login_history table
export const logLoginAttempt = async (success, failureReason = null) => {
  try {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user && success) return;

    const ip_address = await getClientIP();
    const user_agent = navigator.userAgent;
    const { deviceType, browser, os } = parseUserAgent(user_agent);

    await supabase.from('login_history').insert({
      user_id: user?.id,
      login_time: new Date().toISOString(),
      success,
      ip_address,
      user_agent,
      device_type: deviceType,
      browser,
      os,
      failure_reason: failureReason
    });
  } catch (error) {
    console.error('Failed to log login attempt:', error);
  }
};

// Log to user_sessions table
export const createUserSession = async () => {
  try {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return;

    const ip_address = await getClientIP();
    const user_agent = navigator.userAgent;
    const { deviceType } = parseUserAgent(user_agent);

    await supabase.from('user_sessions').insert({
      user_id: user.id,
      ip_address,
      user_agent,
      device_type: deviceType,
      is_active: true,
      created_at: new Date().toISOString(),
      last_activity: new Date().toISOString()
    });
  } catch (error) {
    console.error('Failed to create user session:', error);
  }
};

// Update session activity
export const updateSessionActivity = async () => {
  try {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return;

    // Update the most recent active session
    const { data: sessions } = await supabase
      .from('user_sessions')
      .select('id')
      .eq('user_id', user.id)
      .eq('is_active', true)
      .order('created_at', { ascending: false })
      .limit(1);

    if (sessions && sessions.length > 0) {
      await supabase
        .from('user_sessions')
        .update({ last_activity: new Date().toISOString() })
        .eq('id', sessions[0].id);
    }
  } catch (error) {
    console.error('Failed to update session activity:', error);
  }
};

// Log to password_history table
export const logPasswordChange = async (method = 'user_settings') => {
  try {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return;

    const ip_address = await getClientIP();
    const user_agent = navigator.userAgent;

    await supabase.from('password_history').insert({
      user_id: user.id,
      changed_at: new Date().toISOString(),
      changed_by: 'user',
      ip_address,
      user_agent,
      method
    });
  } catch (error) {
    console.error('Failed to log password change:', error);
  }
};

// Log to audit_logs table
export const logAuditActivity = async ({ action, tableName, oldData, newData }) => {
  try {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return;

    await supabase.from('audit_logs').insert({
      user_id: user.id,
      action,
      table_name: tableName,
      old_data: oldData,
      new_data: newData,
      created_at: new Date().toISOString()
    });
  } catch (error) {
    console.error('Failed to log audit activity:', error);
  }
};